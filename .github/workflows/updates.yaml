name: Nightly update
on:
    schedule:
        - cron: "* * * * *"

jobs:
    update_routes:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
              with:
                  persist-credentials: false

            - run: "bash update_dependencies.bash"

            - uses: gr2m/create-or-update-pull-request-action@v1
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
              with:
                title: "Automated dependencies update"
                body: |
                  Github-Action-based Automated dependencies update.
                    
                  Check the `.github/workflows/update.yaml` file to see how it works.
                branch: "auto_updates"
                commit-message: "Automated dependencies update"
                auto-merge: squash
                update-pull-request-title-and-body: false
